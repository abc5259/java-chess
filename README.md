# java-chess

체스 미션 저장소

#### 실행 방법
```
cd docker/
docker-compose up
```

# 체스 4 단계 미션 - DB 적용

## 1. 기능 요구사항
- 콘솔 UI에서 체스 게임을 할 수 있는 기능을 구현한다.
- 1단계는 체스 게임을 할 수 있는 체스판을 초기화한다.
- 체스판에서 말의 위치 값은 가로 위치는 왼쪽부터 a ~ h이고, 세로는 아래부터 위로 1 ~ 8로 구현한다.
- `move source위치 target위치`을 실행해 이동한다.
- 체스판에서 각 진영은 검은색(대문자)과 흰색(소문자) 편으로 구분한다.
- `status` 명령을 입력하면 각 진영의 점수를 출력하고 어느 진영이 이겼는지 결과를 볼 수 있어야 한다.
- 애플리케이션을 재시작하더라도 이전에 하던 체스 게임을 다시 시작할 수 있어야 한다. 
- DB를 적용할 때 도메인 객체의 변경을 최소화해야한다.

```
RNBQKBNR  8 (rank 8)
PPPPPPPP  7
........  6
........  5
........  4
........  3
pppppppp  2
rnbqkbnr  1 (rank 1)

abcdefgh
```

- **체스 용어 정리**
> **file(파일)**: 체스판의 세로줄, a ~ h로 표현된다.
> 
> **rank(랭크)**: 체스판의 가로줄, 1 ~ 8로 표현된다.
> 
> **square(스퀘어)**: 체스 판에 존재하는 하나의 칸을 의미한다. 총 64칸이 존재한다.
> 
> **take(테이크)**: 체스 말이 다른 진영의 말을 잡는 것을 의미한다.
> 
> **checkMate(체크 메이트)**: 기존 체스의 체크메이트와는 다르게 체크메이트 상태를 킹이 잡혔을 때로 재정의한다.


## 2. 기능 목록


### 2-1. 입력
- [x] 게임 시작을 위한 `start` 입력 받기
- [x] 게임 종료를 위한 `end` 입력 받기
- [x] 게임 진행을 위한 `move source위치 target위치` 입력 받기
  - [x] 정해진 게임 Command 입력인지 검증
- [x] 게임 결과를 위한 `status`입력 받기

### 2-2. 메인 로직 실행

- [x] 체스 말(Piece)를 생성하여 체스판 위에 배치한다.
  - [x] 체스 말(Piece)을 정해진 규칙에 따라 배치한다.
  - [x] 체스 말(Piece)를 흑/백 구분하여 배치한다.
  - [x] 체스 말(Piece)을 종류별로 생성한다.
- [x] 체스 말(Piece)를 이동시킨다.
  - [x] 흑/백이 번갈아가며 이동 명령을 내릴 수 있다.
  - [x] 모든 체스 말은 정해진 이동 규칙에 따라 이동 여부가 결정된다.
    - [x] 이동 경로에 Piece가 존재하는 경우, 이동이 제한된다.
      - [x] Knight Piece의 경우는 제외한다.
    - [x] 도착점에 기물이 있는 경우, 움직임을 판단한다. 
      - [x] 상대 진영의 기물인 경우, 상대 진영의 기물을 take를 한다.
      - [x] 같은 진영의 기물인 경우, 이동이 제한된다.
    - [x] Pawn의 경우 이동 규칙과 take할 때의 이동규칙이 다르다.
  - [x] `Check`를 당한 경우, `Check`를 해소할 수 있는 이동만 허용된다.
- [x] `King`이 잡혔을 때 게임을 종료한다.
  - [x] 각 진영별로 현재 남아있는 말에 대한 점수를 구한다.
    - [x] 각 말 별로 다른 점수가 부여된다.
      - [x] 같은 세로줄에 같은 색의 `Pawn`이 있는 경우 1점이 아닌 0.5점을 부여한다.
  - [x] 어느 진영이 이겼는지 알 수 있다.
    - [x] 점수와는 별개로 상대방의 킹을 잡은 진영이 승리한다.
    - [x] 체크 메이트로 종료 시 게임 기록을 삭제한다.

### 2-3. 출력
- [x] 입력 가능한 Command 설명 프롬프트 출력한다.
- [x] 생성된 초기 체스판을 출력한다.
  - [ ] 이미 진행중인 체스판이 있을 시 해당 체스판을 출력한다.
  - [x] 상단에는 흑이, 하단에는 백이 위치하도록 한다.
  - [x] 흑은 알파벳 대문자로, 백은 알파벳 소문자로 표현한다.
  - [x] 체스 말이 존재하지 않는 곳은 `.`으로 표현한다.
- [x] 이동 결과를 출력한다.
  - [x] 가능한 이동이 아니면 재입력 문구를 출력한다. 
- [x] 각 진영의 점수와 어느 진영이 이겼는지 출력한다.


## 2. 실행 결과


### DB 연결 시

``` java
체스 게임을 시작합니다.
> 게임 시작 : start
> 게임 불러오기 : load
> 게임 종료 : end
> 게임 이동 : move source위치 target위치 - 예. move b2 b3
load
RNBQKBNR
PPPPPPPP
........
........
p.......
........
.ppppppp
rnbqkbnr

move b2 b4
[ERROR] 검정색 진영의 기물을 이동해야 합니다.
move a7 a5
RNBQKBNR
.PPPPPPP
........
P.......
p.......
........
.ppppppp
rnbqkbnr

end
체스 게임을 종료합니다.
> 게임 현황 확인 : status
> 게임 종료 : end
status
게임 결과  : DRAW
BLACK : 38.0 점
WHITE : 38.0 점
```

### DB 연결 실패 시
``` java
체스 게임을 시작합니다.
> 게임 시작 : start
> 게임 불러오기 : load
> 게임 종료 : end
> 게임 이동 : move source위치 target위치 - 예. move b2 b3
load
[ERROR] 저장된 체스판이 존재하지 않습니다.
새로운 체스판을 생성합니다.
DB와 연결이 이루어 지지 않아 저장은 불가합니다.

RNBQKBNR
PPPPPPPP
........
........
........
........
pppppppp
rnbqkbnr

move a2 a4
RNBQKBNR
PPPPPPPP
........
........
p.......
........
.ppppppp
rnbqkbnr

end
체스 게임을 종료합니다.
> 게임 현황 확인 : status
> 게임 종료 : end
status
게임 결과  : DRAW
BLACK : 38.0 점
WHITE : 38.0 점
```

